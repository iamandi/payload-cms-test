"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const mongoose_paginate_v2_1 = __importDefault(require("mongoose-paginate-v2"));
const buildQuery_1 = __importDefault(require("../mongoose/buildQuery"));
const plugin_1 = __importDefault(require("../localization/plugin"));
const buildSchema_1 = __importDefault(require("../mongoose/buildSchema"));
const buildCollectionSchema = (collection, config, schemaOptions = {}) => {
    const schema = buildSchema_1.default(collection.fields, { timestamps: collection.timestamps !== false, ...schemaOptions });
    schema.plugin(mongoose_paginate_v2_1.default)
        .plugin(buildQuery_1.default);
    if (config.localization) {
        schema.plugin(plugin_1.default, config.localization);
    }
    return schema;
};
exports.default = buildCollectionSchema;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVpbGRTY2hlbWEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvY29sbGVjdGlvbnMvYnVpbGRTY2hlbWEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxnRkFBNEM7QUFDNUMsd0VBQXNEO0FBQ3RELG9FQUF3RDtBQUN4RCwwRUFBa0Q7QUFFbEQsTUFBTSxxQkFBcUIsR0FBRyxDQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsYUFBYSxHQUFHLEVBQUUsRUFBRSxFQUFFO0lBQ3ZFLE1BQU0sTUFBTSxHQUFHLHFCQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxFQUFFLFVBQVUsRUFBRSxVQUFVLENBQUMsVUFBVSxLQUFLLEtBQUssRUFBRSxHQUFHLGFBQWEsRUFBRSxDQUFDLENBQUM7SUFFakgsTUFBTSxDQUFDLE1BQU0sQ0FBQyw4QkFBUSxDQUFDO1NBQ3BCLE1BQU0sQ0FBQyxvQkFBZ0IsQ0FBQyxDQUFDO0lBRTVCLElBQUksTUFBTSxDQUFDLFlBQVksRUFBRTtRQUN2QixNQUFNLENBQUMsTUFBTSxDQUFDLGdCQUFrQixFQUFFLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztLQUN4RDtJQUVELE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUMsQ0FBQztBQUVGLGtCQUFlLHFCQUFxQixDQUFDIn0=