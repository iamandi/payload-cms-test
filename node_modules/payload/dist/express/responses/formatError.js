"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const APIError_1 = __importDefault(require("../../errors/APIError"));
const formatErrorResponse = (incoming) => {
    if (incoming) {
        if (incoming instanceof APIError_1.default && incoming.data && incoming.data.length > 0) {
            return {
                errors: [{
                        name: incoming.name,
                        message: incoming.message,
                        data: incoming.data,
                    }],
            };
        }
        // mongoose
        if (!(incoming instanceof APIError_1.default || incoming instanceof Error) && incoming.errors) {
            return {
                errors: Object.keys(incoming.errors)
                    .reduce((acc, key) => {
                    acc.push({
                        field: incoming.errors[key].path,
                        message: incoming.errors[key].message,
                    });
                    return acc;
                }, []),
            };
        }
        if (Array.isArray(incoming.message)) {
            return {
                errors: incoming.message,
            };
        }
        if (incoming.name) {
            return {
                errors: [
                    {
                        message: incoming.message,
                    },
                ],
            };
        }
    }
    return {
        errors: [
            {
                message: 'An unknown error occurred.',
            },
        ],
    };
};
exports.default = formatErrorResponse;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybWF0RXJyb3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZXhwcmVzcy9yZXNwb25zZXMvZm9ybWF0RXJyb3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxxRUFBNkM7QUFJN0MsTUFBTSxtQkFBbUIsR0FBRyxDQUFDLFFBQXVELEVBQWlCLEVBQUU7SUFDckcsSUFBSSxRQUFRLEVBQUU7UUFDWixJQUFJLFFBQVEsWUFBWSxrQkFBUSxJQUFJLFFBQVEsQ0FBQyxJQUFJLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzdFLE9BQU87Z0JBQ0wsTUFBTSxFQUFFLENBQUM7d0JBQ1AsSUFBSSxFQUFFLFFBQVEsQ0FBQyxJQUFJO3dCQUNuQixPQUFPLEVBQUUsUUFBUSxDQUFDLE9BQU87d0JBQ3pCLElBQUksRUFBRSxRQUFRLENBQUMsSUFBSTtxQkFDcEIsQ0FBQzthQUNILENBQUM7U0FDSDtRQUVELFdBQVc7UUFDWCxJQUFJLENBQUMsQ0FBQyxRQUFRLFlBQVksa0JBQVEsSUFBSSxRQUFRLFlBQVksS0FBSyxDQUFDLElBQUksUUFBUSxDQUFDLE1BQU0sRUFBRTtZQUNuRixPQUFPO2dCQUNMLE1BQU0sRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7cUJBQ2pDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRTtvQkFDbkIsR0FBRyxDQUFDLElBQUksQ0FBQzt3QkFDUCxLQUFLLEVBQUUsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJO3dCQUNoQyxPQUFPLEVBQUUsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPO3FCQUN0QyxDQUFDLENBQUM7b0JBQ0gsT0FBTyxHQUFHLENBQUM7Z0JBQ2IsQ0FBQyxFQUFFLEVBQUUsQ0FBQzthQUNULENBQUM7U0FDSDtRQUVELElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDbkMsT0FBTztnQkFDTCxNQUFNLEVBQUUsUUFBUSxDQUFDLE9BQU87YUFDekIsQ0FBQztTQUNIO1FBRUQsSUFBSSxRQUFRLENBQUMsSUFBSSxFQUFFO1lBQ2pCLE9BQU87Z0JBQ0wsTUFBTSxFQUFFO29CQUNOO3dCQUNFLE9BQU8sRUFBRSxRQUFRLENBQUMsT0FBTztxQkFDMUI7aUJBQ0Y7YUFDRixDQUFDO1NBQ0g7S0FDRjtJQUVELE9BQU87UUFDTCxNQUFNLEVBQUU7WUFDTjtnQkFDRSxPQUFPLEVBQUUsNEJBQTRCO2FBQ3RDO1NBQ0Y7S0FDRixDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUYsa0JBQWUsbUJBQW1CLENBQUMifQ==